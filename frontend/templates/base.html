<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimalist Media Viewer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
        html { background-color: #222222; color: #eeeeee; }
        body { font-family: sans-serif; }
        .container { padding: 20px; max-width: 960px; }
        .box, .card { background-color: #333333; color: #eeeeee; border: 1px solid #444444; }
        a, a:hover { color: #48c78e; }
        .title, .subtitle, .list-item, .breadcrumb a, .has-text-grey-light { color: #eeeeee !important; }
        .list-item:hover { background-color: #444; }
        .htmx-indicator { display: none; }
        .htmx-request .htmx-indicator { display: inline; }
        .htmx-request.htmx-indicator { display: inline; }
        .modal-background { background-color: rgba(0, 0, 0, 0.85); }
        .modal-content { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        #modal-image { max-width: 95vw; max-height: 95vh; object-fit: contain; }
        .modal-close-custom { position: absolute; top: 20px; right: 20px; z-index: 1001; background: none; border: none; color: white; font-size: 2.5rem; cursor: pointer; }
        .image-viewer-controls { position: absolute; top: 50%; width: 100%; display: flex; justify-content: space-between; transform: translateY(-50%); padding: 0 10px; z-index: 1001; pointer-events: none; }
        .image-viewer-control-button { background: rgba(0,0,0,0.4); border: 1px solid #555; color: white; font-size: 2.5rem; cursor: pointer; padding: 10px 15px; border-radius: 8px; pointer-events: auto; }
        .image-viewer-control-button:hover { background: rgba(0,0,0,0.7); }
    </style>
</head>
<body>
    <section class="section">
        <div class="container">
            <!-- Search Bar -->
            <div class="field">
                <p class="control has-icons-left">
                    <input class="input is-dark" type="text" name="q" 
                           placeholder="Search all media..."
                           hx-get="/search" hx-trigger="keyup changed delay:300ms, search"
                           hx-target="#search-results-container" hx-indicator="#search-spinner"
                           autocomplete="off">
                    <span class="icon is-small is-left"><i class="fas fa-search"></i></span>
                </p>
                <p id="search-spinner" class="help htmx-indicator">Searching...</p>
            </div>
            <div id="search-results-container">
                <!-- Search results will be loaded here -->
            </div>

            <!-- Main Content Area -->
            <div id="main-content" hx-get="/browse/" hx-trigger="load" hx-swap="innerHTML">
                <progress class="progress is-small is-primary" max="100">Loading...</progress>
            </div>
        </div>
    </section>

    <!-- Image Viewer Modal -->
    <div id="image-modal" class="modal">
        <div class="modal-background" onclick="closeModal()"></div>
        <div class="modal-content">
            <div id="modal-image-container">
                <!-- HTMX will place the image viewer content here -->
            </div>
        </div>
        <button class="modal-close-custom" aria-label="close" onclick="closeModal()">&times;</button>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
